!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("unist-builder")):"function"==typeof define&&define.amd?define(["exports","unist-builder"],t):t((e=e||self).translate={},e.ub)}(this,function(e,a){"use strict";a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var r=Object.freeze({BLASTER_ERROR:"blasterError",BOOTING:"runningBootSequence",CANDYBOX_OFFLINE:"candyBoxOffline",DEVICE_DELETED:"deviceDeleted",DEVICE_DISABLED:"deviceDisabled",DEVICE_IN_USE:"deviceInUse",EXCEEDED_PLAN_LIMITS:"planLimitExceeded",INTERNAL_ERROR:"internalError",NO_ACTIVE_PLAN:"noActivePlan",NO_AUTOMATED_MINUTES:"noAvailableAutomatedMinutes",PLATFORM_ERROR_ANDROID:"androidPlatformError",PLATFORM_ERROR_BOOTSTRAP:"bootstrappedPlatformError",PLATFORM_ERROR_LG_WEBOS:"lgWebosPlatformError",PLATFORM_ERROR_UNDEFINED:"notDefinedPlatform",PLATFORM_ERROR_PLAYSTATION:"playstationPlatformError",PLATFORM_ERROR_ROKU:"rokuPlatformError",PLATFORM_ERROR_XBOX:"xboxPlatformError",PLATFORM_ERROR_APPLE_TV:"applePlatformError",SUITEST_DRIVE_OFFLINE:"suitestDriveOffline",SUITEST_DRIVE_SERVICE_OFFLINE:"suitestDriveServiceOffline",TEST_QUEUED:"testQueued",PACKAGE_CORRUPTED:"packageCorrupted",CONFIGURATOR_ERROR:"configuratorError"}),n=Object.freeze({ACTION_FAILED:"actionFailed",APP_UNINSTALL:"unistallingApp",APP_UPLOAD_INSTALL:"uploadingAndInstallingApp",BOOTING_DEVICE:"bootingDevice",CLOSING_APP:"closingApp",DEVICE_IDENTIFICATION:"recoveringID",NOTHING:"nothing",OPENING_APP:"openingApp",WAITING_FOR_BOOTSTRAP:"waitingForConnectionFromBootstrap",WAITING_FOR_IL:"waitingForConnectionFromIL",WAIT_FOR_MANUAL_ACTION:"needManual"}),i=Object.freeze({"startupError.blasterError":function(){return"Cannot continue: IR blaster missing or incorrectly attached"},"startupError.blasterError.desc":function(){return"Infrared blaster assigned to the device is missing or malfunctioning. Check the wiring, replace the blaster or assign another working CandyBox port to this device"},"startupError.bootstrappedPlatformError":function(){return"Cannot continue: Suitest bootstrap app is not running"},"startupError.bootstrappedPlatformError.desc":function(){return"Suitest tried to start the bootstrap application on this device but failed several times and will try no more. Please connect to the device and start the bootstrap app manually, then disconnect and the scheduled test will continue. If you have configured the Suitest channel, tune the TV to this channel and verify that Suitest badge is displayed on TV in the top right corner. If you have not configured the Suitest channel, please contact support"},"startupError.testQueued":function(){return"Test is added to queue"},"startupError.testQueued.desc":function(){return"Execution will start as soon as other tests queued on this device will finish execution"},"startupError.noAvailableAutomatedMinutes":function(){return"Cannot continue: you've used up all of your testing minutes"},"startupError.noAvailableAutomatedMinutes.desc":function(){return"You testing a lot! How about [getting a bigger subscription](https://the.suite.st/preferences/billing)? Or, if you would like to purchase more testing minutes for the current billing cycle, please contact [sales@suite.st](mailto:sales@suite.st). Your testing minutes will renew"},"startupError.noActivePlan":function(){return"Cannot continue: Your subscription has expired"},"startupError.noActivePlan.desc":function(){return"Your subscription has expired, to continue using Suitest please [renew your subscription](https://the.suite.st/preferences/billing)"},"startupError.candyBoxOffline":function(){return"Cannot continue: CandyBox controlling this device is offline"},"startupError.candyBoxOffline.desc":function(){return"Check that the cable plugged into the CandyBox delivers Internet connection or reboot the CandyBox and allow about 5 minutes for it to initialize"},"startupError.suitestDriveOffline":function(){return"Cannot continue: SuitestDrive controlling this device is offline"},"startupError.suitestDriveOffline.desc":function(){return"SuitestDrive controlling this device is not currently running or is offline. Please verify that the host computer has Internet connection and that SuitestDrive is running"},"startupError.suitestDriveServiceOffline":function(){return"The SuitestDrive is not running on the CandyBox"},"startupError.runningBootSequence":function(){return"Trying to open Suitest bootstrap application"},"startupError.runningBootSequence.desc":function(){return"Test will start after the Suitest bootstrap application will open. Suitest will attempt to open the app in a number of ways. After each attempt it will wait for 60 seconds for the app to respond. If it will not, Suitest will try the next available method. Current methods are: 1) Sending EXIT key to the device, 2) Executing user defined boot sequence, 3) turning the TV on and off 4) Turning the TV on again. If starting the test takes a long time, you should configure a better boot sequence"},"startupError.deviceInUse":function(){return"A user is currently connected to this device"},"startupError.deviceInUse.desc":function(){return"Execution will continue after the user disconnects"},"startupError.deviceDisabled":function(){return"This device is disabled"},"startupError.deviceDisabled.desc":function(){return"For the execution to continue please enable the device"},"startupError.deviceDeleted":function(){return"Cannot continue: Device is deleted"},"startupError.deviceDeleted.desc":function(){return"The device on which the execution was scheduled has been deleted. Please cancel the test and schedule it on another available device"},"startupError.internalError":function(){return"Cannot continue: Internal error occurred"},"startupError.internalError.desc":function(){return"We are very sorry, but some fishy error occurred when Suitest was trying to execute your test. Our developers have been notified and are already working hard to resolve the problem"},"startupError.notDefinedPlatform":function(){return"Cannot continue: Device does not support this platform"},"startupError.notDefinedPlatform.desc":function(){return"You have scheduled the test execution with a configuration that depends on a platform, which this device does not currently support. You should either configure the platform on the device or cancel the test run"},"startupError.lgWebosPlatformError":function(){return"Cannot continue: LG WebOS driver has failed"},"startupError.lgWebosPlatformError.desc":function(){return"LG WebOS driver has misbehaved. Please verify that the device is online and it's current IP address is correctly specified in Suitest. Then double check if the Development mode is enabled on the device. If nothing helps try rebooting the device"},"startupError.xboxPlatformError":function(){return"Cannot continue: Xbox driver has failed"},"startupError.xboxPlatformError.desc":function(){return"Xbox driver has misbehaved. Please verify that the device is online and it's current IP address and developer credentials are correctly specified in Suitest. If nothing helps try rebooting the device and restarting SuitestDrive"},"startupError.androidPlatformError":function(){return"Cannot continue: Android driver has failed"},"startupError.androidPlatformError.desc":function(){return"Android driver has misbehaved. Please verify that the device is online and it's current IP address is correctly specified in Suitest. If nothing helps try rebooting the device and restarting SuitestDrive"},"startupError.applePlatformError":function(){return"Cannot continue: Apple TV driver has failed"},"startupError.applePlatformError.desc":function(){return"Apple driver has misbehaved. Please verify that the device is paired with Mac that is running SuitestDrive. Make sure that application build is installable on that device. If nothing helps try rebooting the device and restarting SuitestDrive"},"startupError.rokuPlatformError":function(){return"Cannot continue: Roku driver has failed"},"startupError.rokuPlatformError.desc":function(){return"Roku driver has misbehaved. Please verify that the device is online and it's current IP address and developer credentials are correctly specified in Suitest. Then double check if the Development mode is enabled on the device and your channel/application is valid. If the local IP of the device changes, make sure to set up a static IP for the device"},"startupError.playstationPlatformError":function(){return"Cannot continue: PlayStation 4 driver has failed"},"startupError.playstationPlatformError.desc":function(){return"PlayStation 4 driver has misbehaved. Please verify that the device is online and it's current IP address is correctly specified in Suitest. If nothing helps try rebooting the device and restarting SuitestDrive. If the local IP of the device changes, make sure to set up a static IP for the device."},"startupError.planLimitExceeded":function(){return"Application or user limit has been exceeded"},"startupError.planLimitExceeded.desc":function(){return"Looks like you have reached the limit of applications or users, check your [billing section](https://the.suite.st/preferences/billing) to increase your plan. Please contact [sales@suite.st](sales@suite.st) if you require help with your plan."},"startupError.packageCorrupted":function(){return"Failed to open the app. Please make sure that your app is working correctly."},"startupError.unknownReason":function(e){return"Unknown not started reason received: "+e},"startupError.configuratorError":function(){return"Make sure that Apple Configurator 2 and Automation Tools are installed"},"startupError.configuratorError.desc":function(){return"Please see [our docs](https://suite.st/docs/devices/apple-tv/#installing-apple-configurator-2)."},"progress.status.openingApp":function(){return"Trying to open app‚Ä¶"},"progress.status.closingApp":function(){return"Trying to close app‚Ä¶"},"progress.status.bootingDevice":function(){return"Running the boot sequence defined for the device‚Ä¶"},"progress.status.needManual":function(){return"Paused. For this platform, install and open the application manually."},"progress.status.recoveringID":function(){return"Trying to recover Suitest device ID‚Ä¶"},"progress.status.waitingForConnectionFromBootstrap":function(){return"Waiting for connection from the Suitest app on device‚Ä¶"},"progress.status.waitingForConnectionFromIL":function(){return"Waiting for connection from the instrumentation library‚Ä¶"},"progress.status.unistallingApp":function(){return"Uninstalling app‚Ä¶"},"progress.status.uploadingAndInstallingApp":function(){return"Uploading and installing app‚Ä¶"},"progress.status.unknownStatusCode":function(e){return"Unknown status code received: "+e},"progress.status.undefined":function(){return"A status is expected."}});function o(e){switch(e){case r.BLASTER_ERROR:return{title:i["startupError.blasterError"](),description:i["startupError.blasterError.desc"]()};case r.PLATFORM_ERROR_BOOTSTRAP:return{title:i["startupError.bootstrappedPlatformError"](),description:i["startupError.bootstrappedPlatformError.desc"]()};case r.TEST_QUEUED:return{title:i["startupError.testQueued"](),description:i["startupError.testQueued.desc"]()};case r.NO_AUTOMATED_MINUTES:return{title:i["startupError.noAvailableAutomatedMinutes"](),description:i["startupError.noAvailableAutomatedMinutes.desc"]()};case r.NO_ACTIVE_PLAN:return{title:i["startupError.noActivePlan"](),description:i["startupError.noActivePlan.desc"]()};case r.CANDYBOX_OFFLINE:return{title:i["startupError.candyBoxOffline"](),description:i["startupError.candyBoxOffline.desc"]()};case r.SUITEST_DRIVE_OFFLINE:return{title:i["startupError.suitestDriveOffline"](),description:i["startupError.suitestDriveOffline.desc"]()};case r.SUITEST_DRIVE_SERVICE_OFFLINE:return{title:i["startupError.suitestDriveServiceOffline"](),description:""};case r.BOOTING:return{title:i["startupError.runningBootSequence"](),description:i["startupError.runningBootSequence.desc"]()};case r.DEVICE_IN_USE:return{title:i["startupError.deviceInUse"](),description:i["startupError.deviceInUse.desc"]()};case r.DEVICE_DISABLED:return{title:i["startupError.deviceDisabled"](),description:i["startupError.deviceDisabled.desc"]()};case r.DEVICE_DELETED:return{title:i["startupError.deviceDeleted"](),description:i["startupError.deviceDeleted.desc"]()};case r.INTERNAL_ERROR:return{title:i["startupError.internalError"](),description:i["startupError.internalError.desc"]()};case r.PLATFORM_ERROR_UNDEFINED:return{title:i["startupError.notDefinedPlatform"](),description:i["startupError.notDefinedPlatform.desc"]()};case r.PLATFORM_ERROR_LG_WEBOS:return{title:i["startupError.lgWebosPlatformError"](),description:i["startupError.lgWebosPlatformError.desc"]()};case r.PLATFORM_ERROR_XBOX:return{title:i["startupError.xboxPlatformError"](),description:i["startupError.xboxPlatformError.desc"]()};case r.PLATFORM_ERROR_ANDROID:return{title:i["startupError.androidPlatformError"](),description:i["startupError.androidPlatformError.desc"]()};case r.PLATFORM_ERROR_APPLE_TV:return{title:i["startupError.applePlatformError"](),description:i["startupError.applePlatformError.desc"]()};case r.PLATFORM_ERROR_ROKU:return{title:i["startupError.rokuPlatformError"](),description:i["startupError.rokuPlatformError.desc"]()};case r.EXCEEDED_PLAN_LIMITS:return{title:i["startupError.planLimitExceeded"](),description:i["startupError.planLimitExceeded.desc"]()};case r.PLATFORM_ERROR_PLAYSTATION:return{title:i["startupError.playstationPlatformError"](),description:i["startupError.playstationPlatformError.desc"]()};case r.PACKAGE_CORRUPTED:return{title:i["startupError.packageCorrupted"](),description:""};case r.CONFIGURATOR_ERROR:return{title:i["startupError.configuratorError"](),description:i["startupError.configuratorError.desc"]()};default:var t=e;throw new Error(i["startupError.unknownReason"](t))}}var u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Z(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Z(arguments[t]));return e}function l(e){return T.includes(e.type)}function s(e,n){return e.reduce(function(e,t){"string"==typeof t&&(t=a(T.includes(n)?n:"text",t));var r=e[e.length-1];return l(t)&&(null==r?void 0:r.type)===t.type?r.value+=t.value:e.push(t),e},[])}function d(e){if(void 0!==e)return s(S([e]),"text")}function p(e){throw new Error("Unknown node type: "+JSON.stringify(e))}function $(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i,o=s(S(r.filter(Boolean)),e);switch(e){case"text":case"bold":case"emphasis":case"code":return o[0];case"fragment":return o;case"cell":if(o.every(l))return a("cell",o);throw new TypeError("Cell can only accept section or textual nodes");case"row":if(o.every(function(e){return"cell"===e.type}))return a("row",o);throw new TypeError("Row can only accept Cell as its child");case"table":if(o.every(function(e){return"row"===e.type}))return a("table",{label:d(null==t?void 0:t.label)},o);throw new TypeError("Table can only accept Row as its child");case"dictionary":if(o.every(function(e){return"row"===e.type&&2===e.children.length}))return a("dictionary",{label:d(null==t?void 0:t.label)},o);throw new TypeError("Dictionary can only accept Row with 2 Cells as its child");case"paragraph":case"condition":case"test-line":return a(e,{title:d(null==t?void 0:t.title)},o);case"code-block":if(1===(i=o).length&&"text"===i[0].type)return a("code-block",{label:d(null==t?void 0:t.label)},o[0].value);throw new Error("Code block can only accept plain text children");default:return function(e){throw new Error("Unknown intrinsic element type "+e)}(e)}}function ee(e,i){return e.replace(/<%([a-zA-Z0-9_]{1,20})%>/g,function(e,t){var r,n;return null!==(n=null===(r=i.find(function(e){return e.key===t}))||void 0===r?void 0:r.value)&&void 0!==n?n:e})}function te(e,t){var r=ee(e,t);return r!==e?$("fragment",null,$("bold",null,r)," (",$("code",null,e),")"):$("bold",null,e)}function re(e,t){var r="string"==typeof e?ee(e,t):String(e),n=+r;if(isNaN(n))return $("bold",null,String(e));var i=String(n/1e3)+"s";return String(e)!==r?$("fragment",null,$("bold",null,i)," (",$("code",null,String(e)),")"):$("bold",null,i)}function f(e,t){var r=String(e),n="string"==typeof e?ee(e,t):r;return isNaN(+n)?$("bold",null,r):r!==n?$("fragment",null,$("bold",null,n),"x (",$("code",null,r),")"):$("fragment",null,$("bold",null,r),"x")}function h(e){return e.replace(/[&<"']/g,function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;";default:return"&#039;"}})}function b(e){switch(e){case"~":return"contains";case"!~":return"! contains";case"^":return"starts with";case"!^":return"! starts with";case"$":return"ends with";case"!$":return"! ends with";case"+-":return"=";case"matches":return"matches JS";default:return e}}function v(e,t){var r;if("video"===e.type||null!==(r=e.val)&&void 0!==r&&r.video)return $("bold",null,"video");if("elementId"in e)return t&&t[e.elementId]?$("bold",null,t[e.elementId].name):e.name?$("bold",null,e.name):e.nameHint?$("bold",null,e.nameHint):$("fragment",null,"Unknown element (",$("code",null,e.elementId.slice(0,4)+"..."+e.elementId.slice(-4)),")");if("apiId"in e)return $("bold",null,e.apiId);var n=e.val,i=n.ifMultipleFoundReturn,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(n,["ifMultipleFoundReturn"]),a=Object.keys(o);return 1===a.length?$("code",null,o[a[0]]):$("code",null,JSON.stringify(u(u({},o),{index:null!=i?i:1})))}function y(e,t,r){var n=v(e.subject,r);switch(e.type){case"exists":return $("condition",{title:$("fragment",null,n," exists")});case"!exists":return $("condition",{title:$("fragment",null,n," does not exist")});case"matches":var i=ee(e.val,t.configVariables);return $("condition",{title:$("fragment",null,n," matches JavaScript")},$("code-block",{label:"JavaScript matcher"},i),i!==e.val?$("code-block",{label:"With variables"},e.val):void 0);case"visible":return $("condition",{title:$("fragment",null,n," is visible")});case"has":return $("condition",{title:$("fragment",null,n," properties")},$("table",null,e.expression.map(function(e){return $("row",null,$("cell",null,function(e){switch(e){case"videoUrl":return"video URL";case"url":return"URL";case"color":return"text color";case"zIndex":return"z-index";case"automationId":return"automation ID";case"scaleX":return"scale X";case"scaleY":return"scale Y";case"translationX":return"translation X";case"translationY":return"translation Y";case"pivotX":return"pivot X";case"pivotY":return"pivot Y";case"tagInt":return"tag";case"fontURI":return"font URI";case"proposalURL":return"proposal URL";default:return e.replace(/([A-Z+])/g,function(e,t){return" "+t.toLowerCase()})}}(e.property)),$("cell",null,b(e.type)),$("cell",null,te(e.val+("+-"===e.type?" ¬± "+e.deviation:""),t.configVariables)))})));default:return function(e){throw new Error("Unknown element condition type: "+JSON.stringify(e))}(e)}}function w(i,o){return function(e){var t=e.name,r=e.compare,n=e.val;return $("row",null,$("cell",null,$("text",null,i?"Request":"Response"," "),t.startsWith("@")?$("text",null,t.slice(1)):$("fragment",null,"header ",te(t,o.configVariables))),$("cell",null,b(r)),$("cell",null,te(String(n),o.configVariables)))}}function O(e,t){return["@method","@status"].includes(e.name)||!["@method","@status"].includes(t.name)&&"@body"!==e.name&&("@body"===t.name||e.name>t.name)?-1:1}function ne(e,t,r){switch(e.subject.type){case"element":case"video":return y(e,t,r);case"javascript":return g=t,m=ee((E=e).subject.val,g.configVariables),$("condition",{title:"JavaScript expression"},$("code-block",{label:"JavaScript expression"},m),m!==E.subject.val?$("code-block",{label:"With variables"},E.subject.val):void 0,$("table",null,$("row",null,$("cell",null,"Expression result"),$("cell",null,b(E.type)),$("cell",null,te(E.val,g.configVariables)))));case"location":return h=e,v=t,$("condition",{title:"Current location"},$("table",null,$("row",null,$("cell",null,"Current location"),$("cell",null,b(h.type)),$("cell",null,te(h.val,v.configVariables)))));case"cookie":return f=t,$("condition",{title:"Cookie"},$("table",null,$("row",null,$("cell",null,te((p=e).subject.val,f.configVariables)," cookie"),$("cell",null,b(p.type)),$("cell",null,te(p.val,f.configVariables)))));case"network":return i=t,u=null!==(a=null===(o=(n=e).subject.requestInfo)||void 0===o?void 0:o.sort(O).map(w(!0,i)))&&void 0!==a?a:[],c=null!==(s=null===(l=n.subject.responseInfo)||void 0===l?void 0:l.sort(O).map(w(!1,i)))&&void 0!==s?s:[],d=u.concat(c),$("condition",{title:$("text",null,"Network request ","made"===n.type?"was made":"was not made")},$("dictionary",null,$("row",null,$("cell",null,"="===n.subject.compare?"Exact URL":"URL matching"),$("cell",null,te(n.subject.val,i.configVariables))),$("row",null,$("cell",null,"Previously matched"),$("cell",null,$("bold",null,"all"===n.searchStrategy?"Yes":"No")))),d.length?$("table",{label:"Network request properties"},d):void 0);case"application":return $("condition",{title:"Application has exited"});default:return function(e){throw new Error("Unknown condition subject: "+JSON.stringify(e))}(e.subject)}var n,i,o,a,l,s,u,c,d,p,f,h,v,E,g,m}function E(e,t,r){return $("dictionary",{label:"Condition settings"},$("row",null,$("cell",null,"Repeat"),$("cell",null,f(e,r))),$("row",null,$("cell",null,"Every"),$("cell",null,re(t,r))))}function ie(e,t,r){var n=e.condition,i=e.count,o=e.negateCondition,a=e.delay;return!n&&i&&("string"==typeof i||1<i)?[$("fragment",null," exactly ",f(null!=i?i:1,t.configVariables)),E(null!=i?i:1,null!=a?a:0,t.configVariables)]:n&&o?[$("text",null," only if condition is met"),ne(n,t,r)]:n&&!o?[$("text",null," until condition is met"),$("fragment",null,E(null!=i?i:1,null!=a?a:0,t.configVariables),ne(n,t,r))]:[void 0,void 0]}function oe(e){switch(e){case"success":return"continue";case"exit":return"stop test";case"fail":return"fail";case"warning":return"warn";default:return function(e){throw new Error('Unknown "then" in assert: '+e)}(e)}}function ae(e,t,r,n){var i,o,a=(i=e.val,(o=n)&&o[i]?$("bold",null,o[i].name):$("fragment",null,"(",$("code",null,i.slice(0,4)+"..."+i.slice(-4)),")")),l=Z(ie(e,t,r),2),s=l[0],u=l[1];return $("test-line",{title:$("fragment",null,"Run test ",a,s)},u)}function le(e){switch(e.type){case"element":return $("bold",null,"element");case"window":return $("bold",null,"coordinates"in e?"position":"window");default:return function(e){throw new Error("Unknown target: "+JSON.stringify(e))}(e)}}function se(e,t,r){var n=e.condition?ne(e.condition,t,r):void 0;switch(e.browserCommand.type){case"goBack":return $("test-line",{title:"Go back"},n);case"goForward":return $("test-line",{title:"Go forward"},n);case"refresh":return $("test-line",{title:"Refresh"},n);case"setWindowSize":return $("test-line",{title:"Resize window"},$("dictionary",null,$("row",null,$("cell",null,"Size"),$("cell",null,$("text",null,String(e.browserCommand.params.width),"x",String(e.browserCommand.params.height))))),n);case"dismissAlertMessage":return $("test-line",{title:"Dismiss modal dialog"},n);case"acceptAlertMessage":return $("test-line",{title:"Accept modal dialog"},n);case"acceptPromptMessage":return $("test-line",{title:"Accept modal dialog with message"},$("dictionary",null,$("row",null,$("cell",null,"Message"),$("cell",null,e.browserCommand.params.text))),n);default:return function(e){throw new Error("Unknown browser command: "+JSON.stringify(e))}(e.browserCommand)}}function g(e,t,r,n){switch(e.type){case"assert":case"wait":return Q=t,H=r,K=ne((z=e).condition,Q,H),$("test-line",{title:$("fragment",null,"Assert: ",K.title)},"success"!==z.then||z.timeout?$("dictionary",null,"success"===z.then?void 0:$("row",null,$("cell",null,"When passed"),$("cell",null,oe(z.then))),z.timeout?$("row",null,$("cell",null,"Timeout"),$("cell",null,re(z.timeout,Q.configVariables))):void 0):void 0,K.children);case"clearAppData":return $("test-line",{title:"Clear application data"});case"execCmd":return Y=t,J=ee((X=e).val,Y.configVariables),$("test-line",{title:"Execute JavaScript expression"},$("code-block",{label:"JavaScript expression"},J),J!==X.val?$("code-block",{label:"With variables"},X.val):void 0);case"openApp":return function(e,t){if(!e.relativeUrl)return $("test-line",{title:"Open application"});var r=te(e.relativeUrl,t.configVariables);return $("test-line",{title:"Open application at relative URL"},$("dictionary",null,$("row",null,$("cell",null,"Relative path"),$("cell",null,r))))}(e,t);case"openUrl":return W=t,q=te(e.url,W.configVariables),$("test-line",{title:"Open URL"},$("dictionary",null,$("row",null,$("cell",null,"Exact URL"),$("cell",null,q))));case"sleep":return B=t,G=$("fragment",null,"Sleep ",re(e.timeout,B.configVariables)),$("test-line",{title:G});case"pollUrl":return j=t,V=te((F=e).response,j.configVariables),M=te(F.url,j.configVariables),$("test-line",{title:"Poll URL every 0.5s"},$("dictionary",null,$("row",null,$("cell",null,"Poll URL"),$("cell",null,M)),$("row",null,$("cell",null,"Until receive"),$("cell",null,V))));case"button":return D=t,C=r,L=(x=e).ids.map(function(e,t){return $("fragment",null,$("bold",null,e),t!==x.ids.length-1?", ":"")}),N=Z(ie(x,D,C),2),k=N[0],U=N[1],$("test-line",{title:$("fragment",null,"Press button ",L,k)},U);case"runSnippet":return ae(e,t,r,n);case"sendText":return R=t,I=r,A=te((O=e).val,R.configVariables),P=Z(ie(O,R,I),2),_=P[0],T=P[1],S=$("fragment",null,"Send text ",A," to ",le(O.target),_),$("test-line",{title:S},T);case"setText":return v=t,E=r,g=te((h=e).val,v.configVariables),m=Z(ie(h,v,E),2),b=m[0],y=m[1],w=$("fragment",null,"Set text ",g," to ",le(h.target),b),$("test-line",{title:w},y);case"browserCommand":return se(e,t,r);case"click":return c=Z(ie(u=e,t,r),2),d=c[0],p=c[1],f=$("fragment",null,"Click on ",le(u.target),d),$("test-line",{title:f},p);case"moveTo":return o=Z(ie(i=e,t,r),2),a=o[0],l=o[1],s=$("fragment",null,"Move pointer to ",le(i.target),a),$("test-line",{title:s},l);case"comment":return $("test-line",{title:e.val});default:return function(e){throw new Error("Unknown line type: "+JSON.stringify(e))}(e)}var i,o,a,l,s,u,c,d,p,f,h,v,E,g,m,b,y,w,O,R,I,A,P,_,T,S,x,D,C,L,N,k,U,F,j,V,M,B,G,W,q,X,Y,J,z,Q,H,K}function m(e){return e.value}function R(e){var t,r=null!==(t=e.value)&&void 0!==t?t:"";switch(e.type){case"text":return r;case"bold":return C+r+D;case"emphasis":return N+r+D;case"code":return L+r+D;default:return function(e){throw new Error("Unknown plain text node: "+JSON.stringify(e))}(e)}}function I(e,t){void 0===t&&(t=60),e=c(e);for(var r,n,i=[[]],o=0,a=0;e.length;){var l=e.shift();if(l.value.length<t-a)a+=l.value.length,i[i.length-1].push(l),o=o<a?a:o;else{var s=(n=t-a,[u(u({},r=l),{value:r.value.slice(0,n)}),u(u({},r),{value:r.value.slice(n)})]);a=0,i[i.length-1].push(s[0]),i.push([]),e.splice(0,1,s[1]),o=t}}return[o,i]}function A(e,t,r){switch(void 0===r&&(r=""),e.type){case"text":case"code":case"emphasis":case"bold":return t(e);case"paragraph":return r+e.children.map(t).join("")+x;case"code-block":return function(e,t,r){var n;void 0===r&&(r="");var i=r,o="";return null!==(n=e.label)&&void 0!==n&&n.length&&(o=x+r+e.label.map(t).join(""),i+="  "),o+x+e.value.split(x).map(function(e){return i+"> "+e}).join(x)+x}(e,t,r);case"dictionary":return function(e,l,s){var t;void 0===s&&(s="");var r=null!==(t=e.label)&&void 0!==t&&t.length?x+s+e.label.map(l).join("")+x:"",n=e.children.map(function(e){return e.children.map(function(e){return I(e.children)})}),u=n.reduce(function(e,t){var r=Z(t,1),n=Z(r[0],1)[0];return n<e?e:n},0);return r+n.map(function(e){for(var t,r,n=Z(e,2),i=Z(n[0],2)[1],o=Z(n[1],2)[1],a=[];i.length||o.length;)a.push([s,(null!==(t=i.shift())&&void 0!==t?t:[]).map(l).join("").padStart(u),a.length?"  ":": ",(null!==(r=o.shift())&&void 0!==r?r:[]).map(l).join("")].join(""));return a.join(x)}).join(x)+x}(e,t,r);case"table":return function(e,n,r){var t;void 0===r&&(r="");var i=null!==(t=e.label)&&void 0!==t&&t.length?x+r+e.label.map(n).join("")+x:"",o=e.children.map(function(e){return e.children.map(function(e){return I(e.children)})}),a=o.reduce(function(i,e){return e.forEach(function(e,t){var r,n=Z(e,1)[0];n>(null!==(r=i[t])&&void 0!==r?r:0)&&(i[t]=n)}),i},[]),l=[];return o.map(function(e){for(var t=[];e.some(function(e){return e[1].length});)t.push([r,"‚îÇ ",e.map(function(e,t){var r;return(null!==(r=Z(e,2)[1].shift())&&void 0!==r?r:[]).map(n).join("").padEnd(a[t])}).join(" ‚îÇ ")," ‚îÇ"].join(""));l.push(t.join(x))}),i+r+"‚îå"+a.map(function(e){return"".padStart(e+2,"‚îÄ")}).join("‚î¨")+"‚îê"+x+l.join("\n"+r+"‚îú"+a.map(function(e){return"".padStart(e+2,"‚îÄ")}).join("‚îº")+"‚î§\n")+x+r+"‚îî"+a.map(function(e){return"".padStart(e+2,"‚îÄ")}).join("‚î¥")+"‚îò"}(e,t,r);case"test-line":return k(e,t);case"condition":return x+r+"Condition: "+k(e,t,r+"  ");case"cell":case"row":throw new Error("Cell and Row nodes can only be rendered as part of table or dictionary");default:return p(e)}}function P(e,t){void 0===t&&(t=!0);var r=t?R:m;return Array.isArray(e)||(e=[e]),e.map(function(e){return A(e,r)}).join("")}function _(e,t,r,n){void 0===n&&(n="");var i=['<figure class="'+e+'">'];return null!=r&&r.length&&i.push("<figcaption>"+(n+r.map(U).join(""))+"</figcaption>"),i.push(t,"</figure>"),i.join("")}var T=["text","code","bold","emphasis"],S=function(e){return Array.isArray(e)?e.reduce(function(e,t){return e.concat(S(t))},[]):[e]},x="\n",D="[0m",C="[32m",L="[36m",N="[4m",k=function(e,t,r){void 0===r&&(r="");var n=e.title.map(t).join(""),i=e.children.map(function(e){return A(e,t,r+"  ")}).join("");return n+x+i},U=function(e){var t,r,n,i,o,a,l,s;switch(e.type){case"text":return h(null!==(t=e.value)&&void 0!==t?t:"");case"code":return'<code class="suitest-test-line__text--code">'+(null!==(r=e.value)&&void 0!==r?r:"")+"</code>";case"bold":case"emphasis":return'<span class="suitest-test-line__text--'+e.type+'">'+h(null!==(n=e.value)&&void 0!==n?n:"")+"</span>";case"paragraph":return'<p class="suitest-test-line__paragraph">'+e.children.map(U).join("")+"</p>";case"code-block":return _("suitest-test-line__code-block","<pre><code>"+(s=e).value+"</code></pre>",s.label);case"dictionary":return _("suitest-test-line__dictionary",c(["<dl>"],(l=e).children.map(function(e){return c(["<dt>"],e.children[0].children.map(U),["</dt><dd>"],e.children[1].children.map(U),["</dd>"]).join("")}),["</dl>"]).join(""),l.label);case"table":return _("suitest-test-line__table",c(["<table>"],(a=e).children.map(function(e){return c(["<tr>"],e.children.map(function(e){return"<td>"+e.children.map(U).join("")+"</td>"}),["</tr>"]).join("")}),["</table>"]).join(""),a.label);case"test-line":return _("suitest-test-line",(o=e).children.map(U).join(""),o.title);case"condition":return _("suitest-test-line__condition",(i=e).children.map(U).join(""),i.title,"Condition: ");case"row":case"cell":throw new Error("Cell and Row nodes can only be rendered as part of table or dictionary");default:return p(e)}};e.NOT_STARTED_REASON=r,e.PROGRESS_STATUS=n,e.testLineToAst=g,e.testLineToFormattedText=function(e,t,r,n){var i=g(e,t,r,n);return P(i,!0)},e.testLineToHtml=function(e,t,r,n){var i,o=g(e,t,r,n);return i=o,Array.isArray(i)||(i=[i]),i.map(U).join("")},e.testLineToPlainText=function(e,t,r,n){var i=g(e,t,r,n);return P(i,!1)},e.translateNotStartedReason=o,e.translateProgress=function(e){if("code"in e&&void 0!==e.code)return o(e.code);if(void 0===e.status)throw new Error(i["progress.status.undefined"]());switch(e.status){case n.OPENING_APP:return{title:i["progress.status.openingApp"]()};case n.CLOSING_APP:return{title:i["progress.status.closingApp"]()};case n.BOOTING_DEVICE:return{title:i["progress.status.bootingDevice"]()};case n.WAIT_FOR_MANUAL_ACTION:return{title:i["progress.status.needManual"]()};case n.DEVICE_IDENTIFICATION:return{title:i["progress.status.recoveringID"]()};case n.WAITING_FOR_BOOTSTRAP:return{title:i["progress.status.waitingForConnectionFromBootstrap"]()};case n.WAITING_FOR_IL:return{title:i["progress.status.waitingForConnectionFromIL"]()};case n.APP_UNINSTALL:return{title:i["progress.status.unistallingApp"]()};case n.APP_UPLOAD_INSTALL:return{title:i["progress.status.uploadingAndInstallingApp"]()};case n.NOTHING:case n.ACTION_FAILED:return{title:""};default:var t=e.status;throw new Error(i["progress.status.unknownStatusCode"](t))}},Object.defineProperty(e,"__esModule",{value:!0})});